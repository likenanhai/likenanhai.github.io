[{"title":"mac上apache配置虚拟主机","date":"2017-02-16T10:13:28.000Z","path":"2017/02/16/mac_apache_config_notes/","text":"osx 自带apache虚拟主机配置笔记最近比较闲想学一下php，被卡在apache的配置上花啦我两天时间。总结了一下顺便写下一篇笔记，希望你能用得着。 相关bash命令： 查看当前apache的版本： 1apachectl -v 如果能看到当apache的版本则说明apache已经被成功安装； 或者在终端运行：httpd -v 也能看到同样的效果； 开启apache服务器的相关命令： 1sudo apachectl start 然后输入用户密码，输入了正确的用户密码后不会有任何提示，那此时此刻apache服务器到底有没有成功开启呢？运行如下命令： 1sudo apachectl -t 如果终端输出 Syntax Ok 则说命apache服务器成功开启，否则终端会输出一段错误码，如遇错误码可以直接复制google。 重启apache的命令： 1sudo apachectl restart 每当更改apache的配置文件的时候都需要重启apache才能看到更改后的效果。需要注意的是当配置文件被修改后，重启apache服务器可能会产生错误。错误提示不会在重启命令输入后弹出，需要再次输入sudo apachectl -t 查看apache服务器是否正常启动。 关闭apache的命令： 1sudo apachectl stop 配置虚拟主机用sudo apachectl start 命令开启apache服务器以后，可以在浏览器输入localhost 页面会显示Is work! 的字样。此时服务器是打开的默认的跟目录 /Library/WebServer/Documents 。 配置http.conf文件； 在配置http.conf文件之前首先备份一下该文件，以免误操作引起不必要的麻烦http.conf 文件在 /etc/apache2 目录下，可运行如下命令进行备份： 1sudo cp /etc/apache2/httpd.conf /etc/apache2/httpd.conf.backup 备份完成后，就可以放心的编辑httpd.conf 文件了。 如果你习惯用vi编辑器则可直接在用命令：sudo vim /etc/apache2/httpd.conf 打开文件进行编辑。 如果习惯于用类似于atom的非vi文本编辑器则可以打开电脑的Finder然后按cmd-shift-G 进入etc文件夹； 编辑httpd.conf文件：打开编辑器的查找功能，查找vhost字段。 第160行： 1#LoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so 中的注释 # 号去掉； 第504行： 1#Include /private/etc/apache2/extra/httpd-vhosts.conf 中的注释 # 号去掉； 不难看出第504行的意思是把 /private/etc/apache2/extra/httpd-vhosts.conf 文件包含到该文件到意思。接下来就去配置那个被包涵的文件。 配置httpd-vhosts.conf 在配置http.conf 文件的时候第 504 行里有一个文件目录。及apache2文件夹下的extra文件夹下的httpd-vhosts.conf文件。 打开该文件，你会看到两段&lt; virtualHost *:80 &gt;xxxxxx&lt; /VirtualHost &gt; 这样的配置，这是虚拟主机配置的例子可以先注释掉当作参考。然后把以下代码复复制进去。 12345678910111213141516171819&lt;VirtualHost *:80&gt; DocumentRoot &quot;/Library/WebServer/Documents&quot; ServerName localhost ErrorLog &quot;/private/var/log/apache2/localhost-error_log&quot; CustomLog &quot;/private/var/log/apache2/localhost-access_log&quot; common&lt;/VirtualHost&gt;&lt;VirtualHost *:80&gt; DocumentRoot &quot;/Users/username/dir&quot; ServerName mysite ErrorLog &quot;/private/var/log/apache2/sites-error_log&quot; CustomLog &quot;/private/var/log/apache2/sites-access_log&quot; common &lt;Directory /&gt; Options FollowSymLinks AllowOverride All Order allow,deny Allow from all &lt;/Directory&gt;&lt;/VirtualHost&gt; 下面稍为解释一下上面的配置 ： :80 前面的＊号代表的是本机ip(127.0.0.1)； :80是系统默认端口号（关于端口号可以自行google了解）； DocumentRoot 是文本根目录，及你设置的虚拟主机根目录。 ServerName 是虚拟主机的名称这个名车你可以随便取，只要跟hosts文件中设置一致即可； errorLog 和 CustomLog 都是log 及打印日志的配置； &lt; Directory &gt; 顾名思义是对虚拟主机的目录的一些设置，具体配置这里暂时不作解释，只要按着复制进去的代码原封不改就可以了（可自行google了解）； 保存httpd-vhosts.conf文件。 然后用vi编辑 /etc 目录下的hosts文件，由于某些文本编辑器编辑该文件后可能出现不能保存的情况，而且对该文件的编辑比较简单。可以考虑直接用vi编辑，运行下面命令打开hosts文件 1sudo vim /etc/hosts 然后输入 i 进入编辑状态。 在localhost 后面添加如下代码： 1127.0.0.1 mysite 这里的 mystie 应与http-vhosts.conf文件中的userName相同； 书写完成后按 esc 然后输入 :wq 保存并退出。（如果对vi编辑器的使用不了解 请自行google) 。 到此虚拟主机的配置就完成了 然后输入以下命令： 1sudo apachectl restart 重启apache服务器，然后输入： 1sudo apachectl -t 查看apache是否正常启动，如果出现错误，请再仔细阅读本文，看是不是哪个环节出现了错误，或者直接把错误码复制 google 解决； 如果apache服务器重启没有出现异常你就可以在浏览器输入http://mysite 访问你的根目录下面的文件了；根目录默认访问index.html文件。因为mac的osx 系统自带php 所以接下来你就可以开始学习php了； 配置用IP 访问的虚拟主机；如果上面的一切都顺利完成了的话，就可以在本机上访问这个虚拟目录。既然是服务器，那么我肯定还能在同一局域网的其它其它设备上访问该服务器。 仔细想一下在其它设备上要想访问这个服务器肯定得用到服务器所的主机的ip地址。首先我们可以运行ifconfig 来查找服务器所在的主机的ip地址 然后我们在同一局域网下面滴手机上面访问这个ip地址，页面上显示的是Is work! 此时我们的手机访问的是apache服务器的默认目录，并不是我们刚刚配置好的虚拟主机目录。所以我门还需要配置一个能用ip地址访问的虚拟主机来供其它设备使用。 按照以前的方法在hosts文件里面增加如下代码： 1192.168.100.109 mysite 这里的192.168.100.109及你服务器所在的主机的ip地址； 然后在httpd-vhosts.conf文件中增加如下代码： 123456789101112&lt;VirtualHost 192.168.100.109:80&gt; DocumentRoot &quot;/Users/username/dir&quot; ServerName mysite ErrorLog &quot;/private/var/log/apache2/sites-error_log&quot; CustomLog &quot;/private/var/log/apache2/sites-access_log&quot; common &lt;Directory /&gt; Options FollowSymLinks AllowOverride All Order allow,deny Allow from all &lt;/Directory&gt;&lt;/VirtualHost&gt; 其它配置不变把 端口号前面的 * 号改成当前ip （如果你对http 协议稍有了解的话这里应该很好理解）然后重启apache 服务器，在手机上输入该ip地址就可以访问apache虚拟主机的目录了。 本人知道的就这么点希望对你有所帮助。如果不理解的可以给我发邮件。","tags":[{"name":"apache","slug":"apache","permalink":"http://localhost:4000/tags/apache/"}]}]